# Render Deployment Guide for MediSense AI Backend

## üöÄ Quick Deploy to Render (100% FREE)

### Prerequisites
- GitHub repository with your code
- Render account (free tier available)
- Gemini API key

### Step 1: Prepare Your Repository

Make sure your `Backend/` folder contains:
- ‚úÖ `render.yaml` (deployment configuration)
- ‚úÖ `requirements.txt` (Python dependencies)
- ‚úÖ `app.py` (Flask application)
- ‚úÖ All service files and routes

### Step 2: Connect to Render

1. Go to [render.com](https://render.com)
2. Sign up/Login (free account)
3. Click "New +" ‚Üí "Web Service"
4. Connect your GitHub repository
5. Select the repository containing your code

### Step 3: Configure Deployment

**Option A: Using render.yaml (Recommended)**
- Render will automatically detect `render.yaml` in your Backend folder
- Select "Backend" as the root directory
- Render will use the configuration from `render.yaml`

**Option B: Manual Configuration**
- **Name**: `medisense-backend`
- **Environment**: `Python 3`
- **Build Command**: 
  ```bash
  apt-get update && apt-get install -y tesseract-ocr tesseract-ocr-eng && pip install -r requirements.txt
  ```
- **Start Command**: 
  ```bash
  gunicorn app:app --bind 0.0.0.0:$PORT
  ```
- **Root Directory**: `Backend`

### Step 4: Set Environment Variables

In Render dashboard, add these environment variables:

**Required:**
- `GEMINI_API_KEY` - Your Gemini API key (get from https://makersuite.google.com/app/apikey)
- `SECRET_KEY` - Auto-generated by Render (or set manually)
- `FLASK_ENV` - `production`
- `TESSERACT_CMD` - `/usr/bin/tesseract`

**Optional:**
- `LLM_PROVIDER` - `gemini` (default)
- `GEMINI_MODEL` - `gemini-2.5-flash` or `gemini-pro`
- `USE_EASYOCR` - `false` (use Tesseract)
- `CORS_ORIGINS` - Your frontend URL (e.g., `https://your-frontend.onrender.com`)

### Step 5: Deploy

1. Click "Create Web Service"
2. Render will:
   - Install Tesseract OCR automatically
   - Install all Python dependencies
   - Start your Flask app with Gunicorn
3. Wait for deployment (5-10 minutes first time)

### Step 6: Update Frontend API URL

Update your frontend `api.service.ts`:
```typescript
private apiUrl = 'https://your-backend-name.onrender.com/api';
```

## üìã render.yaml Configuration

The `render.yaml` file includes:
- ‚úÖ Automatic Tesseract OCR installation
- ‚úÖ Python 3.12 support
- ‚úÖ Gunicorn server configuration
- ‚úÖ All required environment variables
- ‚úÖ Free tier plan

## üîß Troubleshooting

### Build Fails
- Check build logs in Render dashboard
- Ensure `requirements.txt` is correct
- Verify Python version compatibility

### Tesseract Not Found
- Build command should install Tesseract automatically
- Check if `TESSERACT_CMD=/usr/bin/tesseract` is set

### API Errors
- Verify `GEMINI_API_KEY` is set correctly
- Check CORS origins match your frontend URL
- Review application logs in Render dashboard

### Service Goes to Sleep (Free Tier)
- Free tier services sleep after 15 minutes of inactivity
- First request after sleep takes ~30 seconds to wake up
- Consider upgrading to paid plan for always-on service

## üìù Notes

- **Free Tier Limits**: 750 hours/month (enough for hackathon!)
- **Sleep Mode**: Service sleeps after inactivity (wakes on request)
- **Build Time**: First build takes 5-10 minutes
- **Auto-Deploy**: Pushes to main branch auto-deploy

## ‚úÖ Deployment Checklist

- [ ] Code pushed to GitHub
- [ ] Render account created
- [ ] Web service created
- [ ] Environment variables set
- [ ] Build successful
- [ ] Service running
- [ ] Frontend API URL updated
- [ ] Tested OCR endpoint
- [ ] Tested summarization endpoint

## üéâ Success!

Once deployed, your backend will be available at:
```
https://your-service-name.onrender.com
```

API endpoints:
- `GET /api/health` - Health check
- `POST /api/ocr` - OCR text extraction
- `POST /api/summarize` - Report summarization
- `POST /api/symptom-check` - Symptom analysis

